<!DOCTYPE html>

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Chaos</title>
  <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhUlEQVQ4EZ2SgQrAIAhEdez/f9klTLnsZqNAsu7uVWMqIjbqeFzHyTfYAsxMvLrRArpgaDqa5YjdqRlWleUGLKzD6IUj1gnA94aIAe/ZfgKYWAEMkoAw/wGhZwEECGf2XUKfAEgOw26eADsz0ymAXZntOfBG6pcJPbWnf2I1dWv6hC5QtQfK4CEgAQxPAAAAAABJRU5ErkJggg==" />
  <script src="lib.js" type="text/javascript" charset="utf-8"></script>
  <script src="Storage.js" type="text/javascript" charset="utf-8"></script>
  <style type="text/css" media="screen">
  body {
    background-color: black;
    margin: 0;
  }
  
  #canvas_frame, #output {
    width: 512px;
    height: 384px;
  }
  
  #canvas_frame {
    margin: 8px auto;
    padding: 16px;
    border: 1px solid #333;
  }
  </style>
</head>
<body>
  <div id='canvas_frame'>
    <canvas id='output' width="512" height="384"></canvas>
  </div>
  <script type="text/javascript">
function draw_sprite(sprite, x, y) {
  $('output').getContext('2d').drawImage(sprite, 16 + x * 32, 16 + y * 32);
}

function draw_text(text, ink) {
  $('output').getContext('2d').drawImage(Storage.text(text, (ink === undefined) ? 15 : ink, 0), 0, 352);
}

function draw_border(ink, paper) {
  $('output').getContext('2d').drawImage(Storage.border(512, 352, ink, (paper === undefined) ? 0 : paper), 0, 0);
}

Storage.init(function (obj) {
  draw_text(Storage.interface_message(0), 14);
  draw_border(9, 0);
  draw_sprite(Storage.object(2).anim[3], 4, 5);
  draw_sprite(Storage.cursor('box', 13), 0, 0);
  draw_sprite(Storage.wizard(0, 10), 1, 1);
  draw_sprite(Storage.weapon("magic_sword", 15)[0], 9, 4);
}, function (status) {
  alert('Could not obtain resource file: (' + status + ')');
});
  </script>
</body>
</html>
