<!DOCTYPE html>

<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Chaos</title>
  <link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAhUlEQVQ4EZ2SgQrAIAhEdez/f9klTLnsZqNAsu7uVWMqIjbqeFzHyTfYAsxMvLrRArpgaDqa5YjdqRlWleUGLKzD6IUj1gnA94aIAe/ZfgKYWAEMkoAw/wGhZwEECGf2XUKfAEgOw26eADsz0ymAXZntOfBG6pcJPbWnf2I1dWv6hC5QtQfK4CEgAQxPAAAAAABJRU5ErkJggg==" />
  <script src="js/globals.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/canvas.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/prototypes.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/storage.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/wizard.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/world.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/info.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/spelldisplay.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/board.js" type="text/javascript" charset="utf-8"></script>
  <script src="js/chaoscanvas.js" type="text/javascript" charset="utf-8"></script>
  <link rel="stylesheet" href="css/chaos.css" type="text/css" media="screen">
</head>
<body>
  <div id='centered_container'>
    <div id='left_column'>
      <canvas id='info' width='256' height='384'></canvas>
    </div>
    <div id='middle_column'>
      <canvas id='board' width='512' height='384'></canvas>
    </div>
    <div id='right_column'>
      <canvas id='spell_display' width='256' height='384'></canvas>
    </div>
  </div>
  <script type="text/javascript">
/*jslint white: true, onevar: true, undef: true, newcap: true, nomen: true, regexp: true, plusplus: true, bitwise: true, browser: true, devel: true, maxerr: 50, indent: 2 */
/*global Ajax: true, Board: true, Canvas: true, ChaosCanvas: true, Info: true, RGB: true, SpellDisplay: true, Storage: true, Wizard: true, World: true, firefox: true*/
function do_moves(obj, count, callback, fast) {
  if (count < obj.length) {
    ChaosCanvas[obj[count].call](obj[count], function () {
      setTimeout(function () {
        do_moves(obj, count + 1, callback, fast);
      }, fast ? 0 : 1000);
    }, fast);
  } else {
    callback();
  }
}

function start() {
  Ajax.get('json/moves.json', function (obj) {
    do_moves(obj, 0, function () {
    }, false);
  }, function (status_code) {
    alert('Error: ' + status_code);
  });
}

ChaosCanvas.init($('board'), 2, $('info'), 1, $('spell_display'), 1, start);
</script>
</body>
</html>
